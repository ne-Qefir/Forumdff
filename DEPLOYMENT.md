# Инструкция по развертыванию форума

Данный документ содержит информацию о том, как развернуть форум на собственном сервере.

## Системные требования

- Node.js версии 18 или выше
- MySQL или MariaDB сервер
- Минимум 1 ГБ оперативной памяти
- Минимум 1 ГБ свободного места на диске

## Подготовка к установке

1. Распакуйте архив с проектом
2. Установите зависимости

```bash
npm install
```

## Настройка базы данных

1. Создайте базу данных MySQL для проекта
2. Настройте переменные окружения для подключения к базе данных:

Создайте файл `.env` в корневой директории проекта со следующим содержимым:

```
DB_HOST=ваш_хост
DB_USER=имя_пользователя
DB_PASSWORD=пароль
DB_DATABASE=имя_базы_данных
```

Если вы не используете `.env` файл, вы можете настроить переменные окружения напрямую в системе или изменить параметры подключения в файле `server/db.ts`.

## Настройка CORS (для работы с другими доменами)

Если ваш клиент будет размещен на другом домене, настройте CORS в файле `.env`:

```
CORS_ORIGIN=https://ваш-домен.com
```

## Сборка проекта

Для production использования соберите проект:

```bash
npm run build
```

## Запуск проекта

### В режиме разработки:

```bash
npm run dev
```

### В production режиме:

```bash
npm start
```

## Структура директорий

- `/client` - исходный код клиентской части
- `/server` - исходный код серверной части
- `/shared` - общие схемы и типы данных
- `/uploads` - директория для загруженных файлов

## Особенности настройки

### Загрузка файлов

По умолчанию загруженные файлы хранятся в директории `/uploads`. Убедитесь, что эта директория существует и доступна для записи.

Пользовательские загрузки доступны по URL `/uploads/имя_файла`.

### Инициализация базы данных

При первом запуске приложения автоматически создаются необходимые таблицы в базе данных. 

В файле `server/db.ts` есть закомментированный код для удаления таблиц. Если вы хотите сбросить базу данных, раскомментируйте код и запустите приложение.

### Настройка Express

Приложение использует Express для серверной части. Основные настройки находятся в файле `server/index.ts`. Вы можете изменить порт сервера, добавив в `.env` файл:

```
PORT=ваш_порт
```

По умолчанию используется порт 5000.

## Возможные проблемы и их решение

1. **Ошибка подключения к базе данных**
   
   Проверьте настройки подключения к базе данных и убедитесь, что база данных запущена и доступна.

2. **Ошибка с правами доступа к директории uploads**
   
   Убедитесь, что директория `/uploads` существует и у пользователя, от имени которого запущено приложение, есть права на запись в эту директорию.

3. **Проблемы с CORS**
   
   Если у вас возникают проблемы с CORS, проверьте настройки CORS в файле `server/index.ts` и переменную окружения `CORS_ORIGIN`.

## Контакты для поддержки

При возникновении проблем с установкой или настройкой приложения, пожалуйста, создайте issue в репозитории проекта или свяжитесь с разработчиками по email.